{"ast":null,"code":"import { apiSettings } from './data.js';\nclass Auth {\n  constructor(_ref) {\n    let {\n      address\n    } = _ref;\n    this._address = address;\n  }\n  _checkRes(res) {\n    if (!res.ok) {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n    return res.json();\n  }\n  signUp(data) {\n    return fetch(`${this._address}/signup`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        password: data.password,\n        email: data.email\n      })\n    }).then(res => {\n      return this._checkRes(res);\n    });\n  }\n  signIn(data) {\n    return fetch(`${this._address}/signin`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        password: data.password,\n        email: data.email\n      })\n    }).then(res => {\n      return this._checkRes(res);\n    });\n  }\n  getUserInfo(token) {\n    return fetch(`${this._address}/users/me`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      return this._checkRes(res);\n    });\n  }\n}\nconst auth = new Auth({\n  address: apiSettings.authAddress\n});\nexport default auth;","map":{"version":3,"names":["apiSettings","Auth","constructor","address","_address","_checkRes","res","ok","Promise","reject","status","json","signUp","data","fetch","method","headers","body","JSON","stringify","password","email","then","signIn","getUserInfo","token","Authorization","auth","authAddress"],"sources":["/Users/alexanderfedorov/Documents/mesto-react/src/utils/Auth.js"],"sourcesContent":["import {apiSettings} from './data.js';\n\nclass Auth {\n  constructor({ address }) {\n    this._address = address;      \n  }\n    \n  _checkRes(res) {\n    if (!res.ok) {\n        return Promise.reject(`Ошибка: ${res.status}`);\n      }\n      return res.json();\n    }\n    \n  signUp(data) {    \n    return fetch(`${this._address}/signup`, {\n      method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",            \n        },\n        body: JSON.stringify({ password:data.password, email:data.email }),\n      })\n        .then((res) => {\n          return this._checkRes(res);\n        });\n    }\n\n  signIn(data) {    \n    return fetch(`${this._address}/signin`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",            \n      },\n      body: JSON.stringify({ password:data.password, email:data.email }),\n      })\n      .then((res) => {\n          return this._checkRes(res);\n      });\n    }\n\n  getUserInfo(token) {\n    return fetch(`${this._address}/users/me`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n      })\n      .then((res) => {\n        return this._checkRes(res);\n      });\n  } \n}\n\nconst auth = new Auth({\n  address: apiSettings.authAddress\n});\n\nexport default auth;"],"mappings":"AAAA,SAAQA,WAAW,QAAO,WAAW;AAErC,MAAMC,IAAI,CAAC;EACTC,WAAW,OAAc;IAAA,IAAb;MAAEC;IAAQ,CAAC;IACrB,IAAI,CAACC,QAAQ,GAAGD,OAAO;EACzB;EAEAE,SAAS,CAACC,GAAG,EAAE;IACb,IAAI,CAACA,GAAG,CAACC,EAAE,EAAE;MACT,OAAOC,OAAO,CAACC,MAAM,CAAE,WAAUH,GAAG,CAACI,MAAO,EAAC,CAAC;IAChD;IACA,OAAOJ,GAAG,CAACK,IAAI,EAAE;EACnB;EAEFC,MAAM,CAACC,IAAI,EAAE;IACX,OAAOC,KAAK,CAAE,GAAE,IAAI,CAACV,QAAS,SAAQ,EAAE;MACtCW,MAAM,EAAE,MAAM;MACZC,OAAO,EAAE;QACP,cAAc,EAAE;MAClB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAEC,QAAQ,EAACP,IAAI,CAACO,QAAQ;QAAEC,KAAK,EAACR,IAAI,CAACQ;MAAM,CAAC;IACnE,CAAC,CAAC,CACCC,IAAI,CAAEhB,GAAG,IAAK;MACb,OAAO,IAAI,CAACD,SAAS,CAACC,GAAG,CAAC;IAC5B,CAAC,CAAC;EACN;EAEFiB,MAAM,CAACV,IAAI,EAAE;IACX,OAAOC,KAAK,CAAE,GAAE,IAAI,CAACV,QAAS,SAAQ,EAAE;MACtCW,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACP,cAAc,EAAE;MAClB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAEC,QAAQ,EAACP,IAAI,CAACO,QAAQ;QAAEC,KAAK,EAACR,IAAI,CAACQ;MAAM,CAAC;IACjE,CAAC,CAAC,CACDC,IAAI,CAAEhB,GAAG,IAAK;MACX,OAAO,IAAI,CAACD,SAAS,CAACC,GAAG,CAAC;IAC9B,CAAC,CAAC;EACJ;EAEFkB,WAAW,CAACC,KAAK,EAAE;IACjB,OAAOX,KAAK,CAAE,GAAE,IAAI,CAACV,QAAS,WAAU,EAAE;MACxCW,MAAM,EAAE,KAAK;MACbC,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClCU,aAAa,EAAG,UAASD,KAAM;MACjC;IACA,CAAC,CAAC,CACDH,IAAI,CAAEhB,GAAG,IAAK;MACb,OAAO,IAAI,CAACD,SAAS,CAACC,GAAG,CAAC;IAC5B,CAAC,CAAC;EACN;AACF;AAEA,MAAMqB,IAAI,GAAG,IAAI1B,IAAI,CAAC;EACpBE,OAAO,EAAEH,WAAW,CAAC4B;AACvB,CAAC,CAAC;AAEF,eAAeD,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}