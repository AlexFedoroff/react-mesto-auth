{"ast":null,"code":"import _classCallCheck from\"/Users/alexanderfedorov/Documents/mesto-react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/alexanderfedorov/Documents/mesto-react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{apiSettings}from'./data.js';var Api=/*#__PURE__*/function(){function Api(_ref){var address=_ref.address,headers=_ref.headers;_classCallCheck(this,Api);this._address=address;this._headers=headers;}_createClass(Api,[{key:\"_checkRes\",value:function _checkRes(res){if(!res.ok){return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}return res.json();}//Информация о пользователе\n},{key:\"getUserInfo\",value:function getUserInfo(){var _this=this;return fetch(\"\".concat(this._address,\"/users/me\"),{method:\"GET\",headers:this._headers}).then(function(res){return _this._checkRes(res);});}//Список фото с ресурса\n},{key:\"getCards\",value:function getCards(){var _this2=this;return fetch(\"\".concat(this._address,\"/cards\"),{method:\"GET\",headers:this._headers}).then(function(res){return _this2._checkRes(res);});}//Изменение информации о пользователей\n},{key:\"editUserInfo\",value:function editUserInfo(data){var _this3=this;return fetch(\"\".concat(this._address,\"/users/me\"),{method:\"PATCH\",headers:this._headers,body:JSON.stringify({name:data.name,about:data.about})}).then(function(res){return _this3._checkRes(res);});}//Добавление фото\n},{key:\"addCard\",value:function addCard(cardInfo){var _this4=this;return fetch(\"\".concat(this._address,\"/cards\"),{method:\"POST\",headers:this._headers,body:JSON.stringify({name:cardInfo.name,link:cardInfo.link})}).then(function(res){return _this4._checkRes(res);});}//Удаление фото\n},{key:\"deleteCard\",value:function deleteCard(cardId){var _this5=this;return fetch(\"\".concat(this._address,\"/cards/\").concat(cardId),{method:\"DELETE\",headers:this._headers}).then(function(res){return _this5._checkRes(res);});}//Поставить лайк\n},{key:\"doLike\",value:function doLike(cardId){var _this6=this;return fetch(\"\".concat(this._address,\"/cards/\").concat(cardId,\"/likes\"),{method:\"PUT\",headers:this._headers}).then(function(res){return _this6._checkRes(res);});}//Снять лайк\n},{key:\"undoLike\",value:function undoLike(cardId){var _this7=this;return fetch(\"\".concat(this._address,\"/cards/\").concat(cardId,\"/likes\"),{method:\"DELETE\",headers:this._headers}).then(function(res){return _this7._checkRes(res);});}//Изменение аватара\n},{key:\"editAvatar\",value:function editAvatar(data){var _this8=this;return fetch(\"\".concat(this._address,\"/users/me/avatar\"),{method:\"PATCH\",headers:this._headers,body:JSON.stringify({avatar:data.avatarLink})}).then(function(res){return _this8._checkRes(res);});}}]);return Api;}();var api=new Api({address:apiSettings.address,headers:{authorization:apiSettings.token,\"Content-Type\":\"application/json\"}});export default api;","map":{"version":3,"names":["apiSettings","Api","address","headers","_address","_headers","res","ok","Promise","reject","status","json","fetch","method","then","_checkRes","data","body","JSON","stringify","name","about","cardInfo","link","cardId","avatar","avatarLink","api","authorization","token"],"sources":["/Users/alexanderfedorov/Documents/mesto-react/src/utils/api.js"],"sourcesContent":["import {apiSettings} from './data.js';\n\nclass Api {\n    constructor({ address, headers }) {\n      this._address = address;\n      this._headers = headers;\n    }\n    \n    _checkRes(res) {\n        if (!res.ok) {\n          return Promise.reject(`Ошибка: ${res.status}`);\n        }\n        return res.json();\n      }\n    \n    //Информация о пользователе\n    getUserInfo() {\n      return fetch(`${this._address}/users/me`, {\n        method: \"GET\",\n        headers: this._headers,\n      })\n        .then((res) => {\n          return this._checkRes(res);\n        });\n    }\n\n    //Список фото с ресурса\n    getCards() {\n      return fetch(`${this._address}/cards`, {\n        method: \"GET\",\n        headers: this._headers,\n      })\n      .then((res) => {\n        return this._checkRes(res);\n      });\n    }\n    \n    //Изменение информации о пользователей\n    editUserInfo(data) {\n      return fetch(`${this._address}/users/me`, {\n        method: \"PATCH\",\n        headers: this._headers,\n        body: JSON.stringify({\n          name: data.name,\n          about: data.about,\n        }),\n      })\n      .then((res) => {\n        return this._checkRes(res);\n      });\n    }\n    \n    //Добавление фото\n    addCard(cardInfo) {\n      return fetch(`${this._address}/cards`, {\n        method: \"POST\",\n        headers: this._headers,\n        body: JSON.stringify({\n          name: cardInfo.name,\n          link: cardInfo.link,\n        }),\n      })\n      .then((res) => {\n        return this._checkRes(res);\n      });\n    }\n    \n    //Удаление фото\n    deleteCard(cardId) {\n      return fetch(`${this._address}/cards/${cardId}`, {\n        method: \"DELETE\",\n        headers: this._headers,\n      })\n      .then((res) => {\n        return this._checkRes(res);\n      });\n    }\n\n    //Поставить лайк\n    doLike(cardId) {\n      return fetch(`${this._address}/cards/${cardId}/likes`, {\n        method: \"PUT\",\n        headers: this._headers,\n      })\n      .then((res) => {\n        return this._checkRes(res);\n      });\n    }\n\n    //Снять лайк\n    undoLike(cardId) {\n      return fetch(`${this._address}/cards/${cardId}/likes`, {\n        method: \"DELETE\",\n        headers: this._headers,\n      })\n      .then((res) => {\n        return this._checkRes(res);\n      });\n  }\n  \n  //Изменение аватара\n  editAvatar(data) {\n    return fetch(`${this._address}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: data.avatarLink,\n      }),\n    })\n    .then((res) => {\n      return this._checkRes(res);\n    });\n  }\n}\n\nconst api = new Api({\n  address: apiSettings.address,\n  headers: {\n    authorization: apiSettings.token,\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nexport default api;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}