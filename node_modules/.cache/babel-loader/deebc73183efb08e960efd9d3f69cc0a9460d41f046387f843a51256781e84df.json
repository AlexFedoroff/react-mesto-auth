{"ast":null,"code":"import _classCallCheck from\"/Users/alexanderfedorov/Documents/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/alexanderfedorov/Documents/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{apiSettings}from'./data.js';var Auth=/*#__PURE__*/function(){function Auth(_ref){var address=_ref.address;_classCallCheck(this,Auth);this._address=address;}_createClass(Auth,[{key:\"_checkRes\",value:function _checkRes(res){if(!res.ok){return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}return res.json();}},{key:\"signUp\",value:function signUp(data){var _this=this;return fetch(\"\".concat(this._address,\"/signup\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({password:data.password,email:data.email})}).then(function(res){return _this._checkRes(res);});}},{key:\"signIn\",value:function signIn(data){var _this2=this;return fetch(\"\".concat(this._address,\"/signin\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({password:data.password,email:data.email})}).then(function(res){return _this2._checkRes(res);});}},{key:\"getUserInfo\",value:function getUserInfo(token){var _this3=this;return fetch(\"\".concat(this._address,\"/users/me\"),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}}).then(function(res){return _this3._checkRes(res);});}}]);return Auth;}();var auth=new Auth({address:apiSettings.authAddress});export default auth;","map":{"version":3,"names":["apiSettings","Auth","address","_address","res","ok","Promise","reject","status","json","data","fetch","method","headers","body","JSON","stringify","password","email","then","_checkRes","token","Authorization","auth","authAddress"],"sources":["/Users/alexanderfedorov/Documents/react-mesto-auth/src/utils/Auth.js"],"sourcesContent":["import {apiSettings} from './data.js';\n\nclass Auth {\n  constructor({ address }) {\n    this._address = address;      \n  }\n    \n  _checkRes(res) {\n    if (!res.ok) {\n        return Promise.reject(`Ошибка: ${res.status}`);\n      }\n      return res.json();\n    }\n    \n  signUp(data) {    \n    return fetch(`${this._address}/signup`, {\n      method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",            \n        },\n        body: JSON.stringify({ password:data.password, email:data.email }),\n      })\n        .then((res) => {\n          return this._checkRes(res);\n        });\n    }\n\n  signIn(data) {    \n    return fetch(`${this._address}/signin`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",            \n      },\n      body: JSON.stringify({ password:data.password, email:data.email }),\n      })\n      .then((res) => {\n          return this._checkRes(res);\n      });\n    }\n\n  getUserInfo(token) {\n    return fetch(`${this._address}/users/me`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n      })\n      .then((res) => {\n        return this._checkRes(res);\n      });\n  } \n}\n\nconst auth = new Auth({\n  address: apiSettings.authAddress\n});\n\nexport default auth;"],"mappings":"8QAAA,OAAQA,WAAW,KAAO,WAAW,CAAC,GAEhCC,KAAI,yBACR,mBAAyB,IAAXC,QAAO,MAAPA,OAAO,4BACnB,IAAI,CAACC,QAAQ,CAAGD,OAAO,CACzB,CAAC,0CAED,mBAAUE,GAAG,CAAE,CACb,GAAI,CAACA,GAAG,CAACC,EAAE,CAAE,CACT,MAAOC,QAAO,CAACC,MAAM,iDAAYH,GAAG,CAACI,MAAM,EAAG,CAChD,CACA,MAAOJ,IAAG,CAACK,IAAI,EAAE,CACnB,CAAC,sBAEH,gBAAOC,IAAI,CAAE,gBACX,MAAOC,MAAK,WAAI,IAAI,CAACR,QAAQ,YAAW,CACtCS,MAAM,CAAE,MAAM,CACZC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,QAAQ,CAACP,IAAI,CAACO,QAAQ,CAAEC,KAAK,CAACR,IAAI,CAACQ,KAAM,CAAC,CACnE,CAAC,CAAC,CACCC,IAAI,CAAC,SAACf,GAAG,CAAK,CACb,MAAO,MAAI,CAACgB,SAAS,CAAChB,GAAG,CAAC,CAC5B,CAAC,CAAC,CACN,CAAC,sBAEH,gBAAOM,IAAI,CAAE,iBACX,MAAOC,MAAK,WAAI,IAAI,CAACR,QAAQ,YAAW,CACtCS,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,QAAQ,CAACP,IAAI,CAACO,QAAQ,CAAEC,KAAK,CAACR,IAAI,CAACQ,KAAM,CAAC,CACjE,CAAC,CAAC,CACDC,IAAI,CAAC,SAACf,GAAG,CAAK,CACX,MAAO,OAAI,CAACgB,SAAS,CAAChB,GAAG,CAAC,CAC9B,CAAC,CAAC,CACJ,CAAC,2BAEH,qBAAYiB,KAAK,CAAE,iBACjB,MAAOV,MAAK,WAAI,IAAI,CAACR,QAAQ,cAAa,CACxCS,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCS,aAAa,kBAAYD,KAAK,CAChC,CACA,CAAC,CAAC,CACDF,IAAI,CAAC,SAACf,GAAG,CAAK,CACb,MAAO,OAAI,CAACgB,SAAS,CAAChB,GAAG,CAAC,CAC5B,CAAC,CAAC,CACN,CAAC,oBAGH,GAAMmB,KAAI,CAAG,GAAItB,KAAI,CAAC,CACpBC,OAAO,CAAEF,WAAW,CAACwB,WACvB,CAAC,CAAC,CAEF,cAAeD,KAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}